<app-navbar></app-navbar>

<div class="page-wrapper" (click)="onDocumentClick($event)">
  <header class="main-header">
    <div class="header-left">
      <h1 class="app-name">HubMorador</h1>
      <span class="user-welcome">Ol√°, {{ userInfo?.nome }}</span>
    </div>
    <div class="header-right">
      <div class="search-bar">
        <input type="text" placeholder="Buscar por √°reas ou avisos...">
      </div>
      <div class="weather-widget">
        <span class="weather-icon">‚òÄÔ∏è</span>
        <span>28¬∞C, Salvador</span>
      </div>
      
      <!-- üîî SINO DE NOTIFICA√á√ïES (√öNICA MODIFICA√á√ÉO) -->
      <div class="notifications" (click)="toggleNotifications()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
        <span class="notification-badge" *ngIf="unreadNotificationsCount > 0">{{ unreadNotificationsCount }}</span>
        
        <div class="notification-panel" *ngIf="showNotifications">
          <div class="panel-header">
            <h4>Notifica√ß√µes</h4>
            <button class="mark-all-read" (click)="markAllAsRead($event)">Marcar todas como lidas</button>
          </div>
          <div class="panel-body">
            <div *ngIf="notifications.length === 0" class="no-notifications">
              Nenhuma notifica√ß√£o
            </div>
            
            <div *ngFor="let notification of notifications; let i = index" 
                 class="notification-item" 
                 [class.unread]="!notification.read"
                 (click)="handleNotificationClick(notification, i, $event)">
              <h5>{{ notification.title }}</h5>
              <p>{{ notification.message }}</p>
              <span class="time">{{ notification.time }}</span>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </header>

  <main class="main-content">
    
    <!-- SE√á√ÉO QUADRO DE AVISOS (MANTIDO COMO ESTAVA) -->
    <section class="notice-board-section">
      <h2 class="notice-board-title">Quadro de Avisos</h2>
      <div class="info-widgets-container">
        <div class="info-widget">
          <h4>Avisos Importantes</h4>
          <div class="aviso-item" *ngFor="let aviso of avisos">
            <span class="aviso-data">{{ aviso.data }}</span>
            <span class="aviso-titulo">{{ aviso.titulo }}</span>
          </div>
        </div>
        <div class="info-widget">
          <h4>Pr√≥ximos Agendamentos</h4>
          <div class="agendamento-item" *ngFor="let agendamento of proximosAgendamentos">
            <p class="agendamento-titulo">{{ agendamento.local }}</p>
            <p class="agendamento-data">{{ agendamento.data }}</p>
          </div>
          <a routerLink="/meus-agendamentos" class="ver-todos-link">Ver todos os agendamentos</a>
        </div>
      </div>
    </section>

    <section class="left-column">
      <div class="carousel-container">
        <div class="carousel-wrapper" #carouselWrapper>
          <div class="carousel-slide" *ngFor="let image of carouselImages; let i = index">
            <img [src]="image.src" [alt]="image.alt">
            <div class="carousel-caption">
              <h2>{{ image.title }}</h2>
              <p>{{ image.subtitle }}</p>
            </div>
          </div>
        </div>
        <a class="carousel-prev" (click)="scrollToSlide('prev')">‚Äπ</a>
        <a class="carousel-next" (click)="scrollToSlide('next')">‚Ä∫</a>
      </div>

      <!-- SE√á√ÉO LOCAIS POPULARES (MANTIDO COMO ESTAVA) -->
      <div class="locais-populares-section">
        <h2>Locais Populares</h2>
        <div class="locais-populares-grid">
          <a *ngFor="let local of locaisPopulares" [routerLink]="local.rota" class="local-popular-card">
            <img [src]="local.imagem" [alt]="local.nome">
            <div class="local-popular-info">
              <h5>{{ local.nome }}</h5>
              <p>{{ local.descricao }}</p>
            </div>
          </a>
        </div>
      </div>

      <div class="agendar-button-container">
        <a routerLink="/agendamentos" class="btn-agendar">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <span>Agendar Outros Espa√ßos</span>
        </a>
      </div>
    </section>

  </main>

  <footer class="main-footer">
    <p>HubMorador ¬© 2025 | Contato da Portaria: (71) 9999-9999 | Email da Administra√ß√£o: admin@condominio.com</p>
  </footer>
</div>